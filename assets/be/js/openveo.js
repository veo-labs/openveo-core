"use strict";!function(){void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains);var t=null;"undefined"!=typeof HTMLDocument?t=HTMLDocument:"undefined"!=typeof Document&&(t=Document),t&&void 0===t.prototype.contains&&(t.prototype.contains=function(t){return Boolean(16&this.compareDocumentPosition(t))})}();;"use strict";!function(r){var t=["ngRoute","ov.authentication","ov.storage","ov.i18n","ov.entity","ov.alert","ov.tableForm","ov.util","ov.socket","ui.bootstrap","ui.tree","ngTasty","formly","formlyBootstrap","ngJSONPath","ngAnimate","ui.tinymce","ngFileUpload"];"undefined"!=typeof openVeoSettings&&openVeoSettings.plugins&&r.forEach(openVeoSettings.plugins,function(e){r.module("ov."+e),t.push("ov."+e)});var e=r.module("ov",t);e.run(["formlyConfig","$filter","$sce",function(e,n,t){e.setWrapper({name:"collapse",templateUrl:"ov-core-collapse.html"}),e.setWrapper({name:"horizontalBootstrapLabel",templateUrl:"ov-core-horizontal-bootstrap-label.html"}),e.setWrapper({name:"horizontalBootstrapLabelOnly",templateUrl:"ov-core-horizontal-bootstrap-label-only.html"}),e.setWrapper({name:"editableWrapper",templateUrl:"ov-core-editable-wrapper.html"}),e.setType({name:"datepicker",templateUrl:"ov-core-formly-datepicker.html",defaultOptions:{validation:{show:!0}},link:function(e,t,o){e.status={opened:!1},e.open=function(){e.status.opened=!0}}}),e.setType({name:"dateTimePicker",templateUrl:"ov-core-formly-date-time-picker.html"}),e.setType({name:"tags",templateUrl:"ov-core-formly-tags.html",defaultOptions:{validation:{show:!0}}}),e.setType({name:"match",templateUrl:"ov-core-formly-match.html",defaultOptions:{validation:{show:!0}}}),e.setType({name:"emptyrow",templateUrl:"ov-core-empty-row.html",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"section",templateUrl:"ov-core-section.html"}),e.setType({name:"autoComplete",templateUrl:"ov-core-formly-auto-complete.html",defaultOptions:{validation:{show:!0}}}),e.setType({extends:"input",name:"editableInput",link:function(e,t,o){e.show=function(){return e.isEmpty=!e.model[e.options.key],e.model[e.options.key]||n("translate")("CORE.UI.EMPTY")}}}),e.setType({extends:"select",name:"editableSelect",link:function(t,e,o){t.show=function(){var e,o=[];return e="[object Array]"===Object.prototype.toString.call(t.model[t.options.key])?t.model[t.options.key]:[t.model[t.options.key]],t.to.options.forEach(function(t){e.forEach(function(e){t.value===e&&o.push(t.name)})}),t.isEmpty=!o.length,o.length?o.join(", "):n("translate")("CORE.UI.EMPTY")}}}),e.setType({name:"editableDatepicker",extends:"datepicker",link:function(e,t,o){e.show=function(){return n("date")(e.model[e.options.key],"shortDate")}}}),e.setType({name:"editableDateTimePicker",extends:"dateTimePicker",link:function(e,t,o){e.show=function(){return e.isEmpty=!e.model[e.options.key],n("date")(e.model[e.options.key],"medium")||n("translate")("CORE.UI.EMPTY")}}}),e.setType({name:"editableTags",extends:"tags",link:function(a,e,t){a.show=function(){var e=a.model[a.options.key];if(a.isEmpty=!e||!e.length,a.isEmpty)return n("translate")("CORE.UI.EMPTY");var r=[];return a.to.availableOptions?e.forEach(function(e){for(var t=0;t<a.to.availableOptions.length;t++){var o=a.to.availableOptions[t];if(e===o.value){r.push(o.name);break}}}):r=e,r.join(", ")}}}),e.setType({name:"ovMultiCheckBox",templateUrl:"ov-core-formly-multi-check-box.html"}),e.setType({name:"ovEditableMultiCheckBox",extends:"ovMultiCheckBox",link:function(o){o.show=function(){var t=[];return r.forEach(o.to.options,function(e){o.model[o.options.key]&&0<=o.model[o.options.key].indexOf(e.id)&&t.push(e.name)}),o.isEmpty=!t.length,t.length?t.join(", "):n("translate")("CORE.UI.EMPTY")}}}),e.setType({extends:"checkbox",name:"editableCheckbox",link:function(e,t,o){e.show=function(){return e.isEmpty=!1,e.model[e.options.key]&&n("translate")("CORE.UI.TRUE")||n("translate")("CORE.UI.FALSE")}}}),e.setType({name:"ovTinymce",templateUrl:"ov-core-textarea-tinymce.html"}),e.setType({name:"ovEditableTinymce",extends:"ovTinymce",link:function(e){e.show=function(){return e.isEmpty=!e.model[e.options.key],e.model[e.options.key]||n("translate")("CORE.UI.EMPTY")}}}),e.setType({name:"editableAutoComplete",extends:"autoComplete",link:function(e,t,o){e.show=function(){return e.isEmpty=!e.model[e.options.key],e.model[e.options.key]||n("translate")("CORE.UI.EMPTY")}}}),e.setType({name:"ovFile",templateUrl:"ov-file.html",link:function(t){t.file=null,t.$watch('model["'+t.options.key+'"]',function(e){100===e&&(t.file=null,t.form.file.$setUntouched(),t.form.file.$setPristine())})}}),e.setType({name:"simple",templateUrl:"ov-core-simple.html",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalFile",extends:"ovFile",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableFile",extends:"horizontalFile",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalTinymce",extends:"ovTinymce",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableTinymce",extends:"ovEditableTinymce",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalInput",extends:"input",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableInput",extends:"editableInput",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalDatepicker",extends:"datepicker",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableDatepicker",extends:"editableDatepicker",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalDateTimePicker",extends:"dateTimePicker",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableDateTimePicker",extends:"editableDateTimePicker",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalSelect",extends:"select",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableSelect",extends:"editableSelect",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalMultiCheckbox",extends:"ovMultiCheckBox",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableMultiCheckbox",extends:"ovEditableMultiCheckBox",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalTags",extends:"tags",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalMatch",extends:"match",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableTags",extends:"editableTags",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalCheckbox",extends:"checkbox",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableCheckbox",extends:"editableCheckbox",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalAutoComplete",extends:"autoComplete",wrapper:["horizontalBootstrapLabel","bootstrapHasError"]}),e.setType({name:"horizontalEditableAutoComplete",extends:"editableAutoComplete",wrapper:["editableWrapper","horizontalBootstrapLabel","bootstrapHasError"]})}]),e.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,o){var r=openVeoSettings.authenticationStrategies,a=0<=openVeoSettings.authenticationMechanisms.indexOf(r.LDAP),n=0<=openVeoSettings.authenticationMechanisms.indexOf(r.CAS);e.when("/",{templateUrl:"views/home.html",controller:"HomeController",title:"CORE.HOME.PAGE_TITLE"}),e.when("/login",{title:"CORE.LOGIN.PAGE_TITLE",templateUrl:"views/login.html",controller:"LoginController",resolve:{i18nCommon:["i18nService",function(e){return e.addDictionary("common")}],i18nLogin:["i18nService",function(e){return e.addDictionary("login")}]}}).otherwise("/"),e.when("/applications-list",{templateUrl:"views/applications.html",controller:"ApplicationController",title:"CORE.APPLICATIONS.PAGE_TITLE",access:"core-access-applications-page",resolve:{scopes:["applicationService",function(e){return e.loadScopes()}]}}),e.when("/users-list",{templateUrl:"views/users.html",controller:"UserController",title:"CORE.USERS.PAGE_TITLE",access:"core-access-users-page",resolve:{roles:["entityService",function(e){return e.getAllEntities("roles")}]}}),e.when("/profile",{templateUrl:"views/profile.html",controller:"ProfileController",controllerAs:"ctrl",title:"CORE.PROFILES.PAGE_TITLE",resolve:{user:["authenticationService",function(e){return e.getUserInfo()}]}}),e.when("/roles-list",{templateUrl:"views/roles.html",controller:"RoleController",title:"CORE.ROLES.PAGE_TITLE",access:"core-access-roles-page",resolve:{permissions:["userService",function(e){return e.loadPermissions()}]}}),e.when("/groups-list",{templateUrl:"views/groups.html",controller:"GroupController",title:"CORE.GROUPS.PAGE_TITLE",access:"core-access-groups-page"}),e.when("/openveo-settings",{templateUrl:"views/settings.html",controller:"SettingsController",controllerAs:"ctrl",title:"CORE.SETTINGS.PAGE_TITLE",access:"core-access-settings-page",resolve:{ldapSettings:["$q","entityService",function(e,t){return a?t.getEntity("settings",null,"core-"+r.LDAP):e.when({data:{}})}],casSettings:["$q","entityService",function(e,t){return n?t.getEntity("settings",null,"core-"+r.CAS):e.when({data:{}})}],roles:["entityService",function(e){return e.getAllEntities("roles")}]}}),t.html5Mode(!0),o.interceptors.push("errorInterceptor"),FastClick.attach(document.body)}]),e.filter("noBreakSpace",function(){return function(e){return e.replace(/ /g,"Â ")}})}(angular);;"use strict";!function(t,r){function a(t,r){var e,o;return t.data&&t.data.error&&(e=t.data.error.code,o=t.data.error.module),403===t.status?r("translate")("CORE.ERROR.FORBIDDEN"):400===t.status?r("translate")("CORE.ERROR.CLIENT")+" (code="+e+", module="+o+")":e&&o?r("translate")("CORE.ERROR.SERVER")+" (code="+e+", module="+o+")":r("translate")("CORE.ERROR.SERVER")}function e(r,e,o){return{responseError:function(t){return 401===t.status?r.$broadcast("forceLogout"):-1==t.status&&t.config&&t.config.timeout&&t.config.timeout.status||r.$broadcast("setAlert","danger",a(t,e),0),o.reject(t)}}}angular.module("ov").factory("errorInterceptor",e),e.$inject=["$rootScope","$filter","$q"]}(angular);;"use strict";!function(e){function n(e,u,a,c,f,l,n,o,p,i,t,s,g){function d(){u.closeResponsiveMenu(),f.setUserInfo(),u.menu=!1,u.displayMainMenu=!1,l.destroyMenu(),p.removeDictionary("back-office"),n.destroy(),o.destroy(),t.deleteCache(),i.closeAll(),a.path("/login")}function h(e,n){return(n=angular.copy(n))&&Object.keys(n).length?(o=e,i=n,s=[],angular.forEach((o||"").split(":"),function(e,n){if(0===n)s.push(e);else{var o=e.match(/(\w+)(?:[?*])?(.*)/),t=o[1];s.push(i[t]),s.push(o[2]||""),delete i[t]}}),s.join("")):e;var o,i,s}u.displayMainMenu=!1,u.isResponsiveMenuClosed=!0,u.languages=p.getLanguages(),u.language=p.getLanguageName(p.getLanguage()),u.indexOpen=-1,u.menuDropdownIsOpen=!1,u.toggleResponsiveMenu=function(){u.isResponsiveMenuClosed=!u.isResponsiveMenuClosed},u.closeResponsiveMenu=function(){!u.isResponsiveMenuClosed&&u.displayMainMenu&&(u.isResponsiveMenuClosed=!0)},u.openResponsiveMenu=function(){u.isResponsiveMenuClosed&&u.displayMainMenu&&(u.isResponsiveMenuClosed=!1)},u.navigate=function(e){e&&(u.closeResponsiveMenu(),a.path(angular.element(e.currentTarget).attr("href")))},u.changeLanguage=function(e){p.setLanguage(e),s.location.reload()},u.toggleSidebarSubMenu=function(e){-1==u.indexOpen?u.indexOpen=e:u.indexOpen==e?u.indexOpen=-1:u.indexOpen=e},u.logout=function(){u.userInfo&&u.userInfo.origin===openVeoSettings.authenticationStrategies.CAS?s.location.href="logout":f.logout().then(d,d)},u.$on("setAlert",function(e,n,o,t){i.add(n,o,t)}),u.$on("logout",function(){u.logout()}),u.$on("forceLogout",function(){d()}),u.$on("$routeChangeStart",function(e,n){var o=n.params,t=h(n.originalPath,o);if(!t)return!1;var i=f.getUserInfo(),s=p.getDictionary("back-office",p.getLanguage());if(!("/login"===a.path()||!i||l.getMenu()&&s)){e.preventDefault();var r={i18nCommon:p.addDictionary("common"),i18nBE:p.addDictionary("back-office",!0),menu:l.loadMenu()};return g.all(r).then(function(e){t===h(a.path(),o)?c.reload():a.path(t)},function(e){401===e.status&&(d(),c.reload())}),!1}if("/login"!==a.path()&&!i)return e.preventDefault(),a.path("/login"),!1;if("/login"!==a.path()&&i){if(u.userInfo=i,n.access&&!u.checkAccess(n.access))return e.preventDefault(),a.path("/"),!1}else if("/login"===a.path()&&i)return e.preventDefault(),a.path("/"),!1}),u.$on("$routeChangeSuccess",function(e,n){t.deleteCache(),u.userInfo=f.getUserInfo(),u.userInfo?(u.menu=l.getMenu(),u.displayMainMenu=!!u.menu,l.setActiveMenuItem()):u.displayMainMenu=!1,u.title=c.current&&c.current.title||""}),u.$on("$routeChangeError",function(e,n,o,t){u.userInfo?t&&t.redirect?a.path(t.redirect):a.path("/"):a.path("/login")}),u.checkAccess=function(e){if(u.userInfo){if(u.userInfo.id===openVeoSettings.superAdminId)return!0;if("string"==typeof e&&(e=[e]),u.userInfo.roles&&0!=u.userInfo.roles.length&&u.userInfo.permissions&&0!=u.userInfo.permissions.length)return 0<e.filter(function(e){return 0<=u.userInfo.permissions.indexOf(e)}).length}return!1},u.checkContentAccess=function(e,n){if(u.userInfo&&e&&n){if(u.userInfo.id===openVeoSettings.superAdminId||e.metadata.user===openVeoSettings.anonymousId||u.userInfo.id===e.metadata.user)return!0;if(e.metadata.groups&&e.metadata.groups.length)for(var o=(i=e.metadata.groups,s=n,r=[],i&&i.length&&i.forEach(function(e){r.push(s+"-group-"+e)}),r),t=0;t<o.length;t++)if(0<=u.userInfo.permissions.indexOf(o[t]))return!0}var i,s,r;return!1},u.hasPermission=function(e){return!!(u.userInfo&&u.userInfo.permissions&&e)&&0<=u.userInfo.permissions.indexOf(e)}}angular.module("ov").controller("MainController",n),n.$inject=["$rootScope","$scope","$location","$route","authenticationService","menuService","applicationService","userService","i18nService","alertService","entityService","$window","$q"]}();;"use strict";!function(n){function e(e,i,o,t,a){var n=openVeoSettings.authenticationStrategies;e.verticalAlign=!0,e.onError=!1,e.languages=a.getLanguages(),e.language=a.getLanguage(),e.isPending=!1,e.hasCas=0<=openVeoSettings.authenticationMechanisms.indexOf(n.CAS),e.changeLanguage=function(n){a.setLanguage(n),o.location.reload()},e.signIn=function(){e.isPending=!0,t.login(e.userLogin,e.password).then(function(n){e.isPending=!1,t.setUserInfo(n.data),i.path("/")},function(){e.isPending=!1,e.onError=!0,e.userLogin=e.password=""})}}angular.module("ov").controller("LoginController",e),e.$inject=["$scope","$location","$window","authenticationService","i18nService"]}();;"use strict";!function(o){function e(e,n){e.version=openVeoSettings.version,e.open=function(o){n.open({templateUrl:"versionModal.html",controller:"ModalInstanceCtrl",size:o,resolve:{items:function(){return e.version}}})}}function n(o,e,n){o.items=n,o.close=function(){e.close("close")}}o.controller("HomeController",e),o.controller("ModalInstanceCtrl",n),e.$inject=["$scope","$uibModal"],n.$inject=["$scope","$uibModalInstance","items"]}(angular.module("ov"));;"use strict";!function(e){function t(n,a,o,e){var s="applications";function l(e,t){o.removeEntities(s,null,e.join(",")).then(function(){n.$emit("setAlert","success",a("translate")("CORE.APPLICATIONS.REMOVE_SUCCESS"),4e3),t()})}n.scopes=e.data.scopes,angular.forEach(n.scopes,function(e){e.name=a("translate")(e.name),e.description=a("translate")(e.description)}),n.rights={},n.rights.add=n.checkAccess("core-add-"+s),n.rights.edit=n.checkAccess("core-update-"+s),n.rights.delete=n.checkAccess("core-delete-"+s);var t=n.tableContainer={};t.entityType=s,t.filterBy=[{key:"query",value:"",label:a("translate")("CORE.APPLICATIONS.QUERY_FILTER")}],t.header=[{key:"name",name:a("translate")("CORE.APPLICATIONS.NAME_COLUMN"),class:["col-xs-11"]},{key:"action",name:a("translate")("CORE.UI.ACTIONS_COLUMN"),class:["col-xs-1"]}],t.actions=[{label:a("translate")("CORE.UI.REMOVE"),warningPopup:!0,condition:function(e){return n.rights.delete&&!e.locked&&!e.saving},callback:function(e,t){l([e.id],t)},global:function(e,t){l(e,t)}}];var i=n.editFormContainer={};i.model={},i.entityType=s,i.init=function(e){i.fields[1].templateOptions.message=e.id,i.fields[2].templateOptions.message=e.secret},i.fields=[{key:"name",type:"horizontalEditableInput",templateOptions:{label:a("translate")("CORE.APPLICATIONS.ATTR_NAME"),required:!0}},{noFormControl:!0,type:"emptyrow",templateOptions:{label:a("translate")("CORE.APPLICATIONS.ATTR_ID"),message:""}},{noFormControl:!0,type:"emptyrow",templateOptions:{label:a("translate")("CORE.APPLICATIONS.ATTR_SECRET"),message:""}}],0!=n.scopes.length&&i.fields.push({key:"scopes",type:"horizontalEditableMultiCheckbox",templateOptions:{label:a("translate")("CORE.APPLICATIONS.ATTR_SCOPES"),options:n.scopes,valueProperty:"id",labelProperty:"name"}}),i.conditionEditDetail=function(e){return n.rights.edit&&!e.locked},i.onSubmit=function(e){return t=e,o.updateEntity(s,null,t.id,{name:t.name,scopes:t.scopes});var t};var r=n.addFormContainer={};r.model={},r.fields=[{key:"name",type:"horizontalInput",templateOptions:{label:a("translate")("CORE.APPLICATIONS.FORM_ADD_NAME"),required:!0,description:a("translate")("CORE.APPLICATIONS.FORM_ADD_NAME_DESC")}}],0==n.scopes.length?r.fields.push({noFormControl:!0,template:"<p>"+a("translate")("CORE.APPLICATIONS.NO_APPLICATIONS")+"</p>"}):r.fields.push({key:"scopes",type:"horizontalMultiCheckbox",templateOptions:{label:a("translate")("CORE.APPLICATIONS.FORM_ADD_SCOPES"),required:!1,options:n.scopes,valueProperty:"id",labelProperty:"name",description:a("translate")("CORE.APPLICATIONS.FORM_ADD_SCOPES_DESC")},expressionProperties:{"templateOptions.disabled":"!model.name"}}),r.onSubmit=function(e){return t=e,o.addEntities(s,null,[t]);var t}}angular.module("ov").controller("ApplicationController",t),t.$inject=["$scope","$filter","entityService","scopes"]}();;"use strict";!function(e){function n(a,t,s,e){var i,o="roles";function l(e){var s={name:e.name,permissions:[]};return angular.forEach(e,function(e,n){var t="permissions_";n.slice(0,t.length)==t&&(s.permissions=s.permissions.concat(e))}),s}function r(e,n){s.removeEntities(o,null,e.join(",")).then(function(){a.$emit("setAlert","success",t("translate")("CORE.ROLES.REMOVE_SUCCESS"),4e3),n()})}a.permissions=e.data.permissions,angular.forEach(a.permissions,function(e){e.label=t("translate")(e.label),angular.forEach(e.permissions,function(e){e.name=t("translate")(e.name),e.description=t("translate")(e.description)})}),a.rights={},a.rights.add=a.checkAccess("core-add-"+o),a.rights.edit=a.checkAccess("core-update-"+o),a.rights.delete=a.checkAccess("core-delete-"+o);var n=a.tableContainer={};n.entityType=o,n.filterBy=[{key:"query",value:"",label:t("translate")("CORE.ROLES.QUERY_FILTER")}],n.header=[{key:"name",name:t("translate")("CORE.ROLES.NAME_COLUMN"),class:["col-xs-11"]},{key:"action",name:t("translate")("CORE.UI.ACTIONS_COLUMN"),class:["col-xs-1"]}],n.actions=[{label:t("translate")("CORE.UI.REMOVE"),warningPopup:!0,condition:function(e){return a.rights.delete&&!e.locked&&!e.saving},callback:function(e,n){r([e.id],n)},global:function(e,n){r(e,n)}}];var p=a.editFormContainer={};p.model={},p.entityType=o,p.init=function(t){var e,s,i,n=(e=a.permissions,s=t.permissions,i={},angular.forEach(e,function(e,n){angular.forEach(e.permissions,function(e){i["permissions_"+n]||(i["permissions_"+n]=[]),0<=s.indexOf(e.id)&&i["permissions_"+n].push(e.id)})}),i);angular.forEach(n,function(e,n){t[n]=e})},p.fields=[{key:"name",type:"horizontalEditableInput",templateOptions:{label:t("translate")("CORE.ROLES.ATTR_NAME"),required:!0}}],0==a.permissions.length?p.fields.push({noFormControl:!0,template:"<p>"+t("translate")("CORE.ROLES.NO_DATA")+"</p>"}):(i=[],p.fields.push({noFormControl:!0,templateOptions:{label:t("translate")("CORE.ROLES.FORM_ADD_PERMISSIONS")},wrapper:["horizontalBootstrapLabelOnly"],template:""}),angular.forEach(a.permissions,function(e,n){i.push({key:"permissions_"+n,type:"ovEditableMultiCheckBox",wrapper:["editableWrapper","collapse"],templateOptions:{label:"",labelCollapse:e.label,options:e.permissions,valueProperty:"id",labelProperty:"name"}})}),p.fields.push({className:"col-md-8 col-push-md-4",fieldGroup:i})),p.conditionEditDetail=function(e){return a.rights.edit&&!e.locked},p.onSubmit=function(e){return t=l(n=e),s.updateEntity(o,null,n.id,t).then(function(){n.permissions=angular.copy(t.permissions)});var n,t};var c=a.addFormContainer={};c.model={},c.fields=[{key:"name",type:"horizontalInput",templateOptions:{label:t("translate")("CORE.ROLES.FORM_ADD_NAME"),required:!0,description:t("translate")("CORE.ROLES.FORM_ADD_NAME_DESC")}}],0==a.permissions.length?c.fields.push({noFormControl:!0,template:"<p>"+t("translate")("CORE.ROLES.NO_DATA")+"</p>"}):(i=[],c.fields.push({noFormControl:!0,templateOptions:{label:t("translate")("CORE.ROLES.FORM_ADD_PERMISSIONS")},wrapper:["horizontalBootstrapLabelOnly"],template:""}),angular.forEach(a.permissions,function(e,n){i.push({key:"permissions_"+n,type:"ovMultiCheckBox",wrapper:["collapse"],templateOptions:{label:"",labelCollapse:e.label,options:e.permissions,valueProperty:"id",labelProperty:"name"}})}),c.fields.push({className:"col-md-8 col-push-md-4",fieldGroup:i})),c.onSubmit=function(e){return t=l(n=e),s.addEntities(o,null,[t]).then(function(){n.permissions=angular.copy(t.permissions)});var n,t}}angular.module("ov").controller("RoleController",n),n.$inject=["$scope","$filter","entityService","permissions"]}();;"use strict";!function(e){function t(a,l,n,e){var r="users",t="^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$";function i(e,t){n.removeEntities(r,null,e.join(",")).then(function(){a.$emit("setAlert","success",l("translate")("CORE.USERS.REMOVE_SUCCESS"),4e3),t()})}a.roles=e.data.entities,a.rights={},a.rights.add=a.checkAccess("core-add-"+r),a.rights.edit=a.checkAccess("core-update-"+r),a.rights.delete=a.checkAccess("core-delete-"+r);var s,o=a.tableContainer={};o.entityType=r,o.filterBy=[{key:"query",value:"",label:l("translate")("CORE.USERS.QUERY_FILTER")},{key:"origin",type:"select",value:null,label:l("translate")("CORE.USERS.ORIGIN_FILTER"),options:(s=[{value:null,name:l("translate")("CORE.USERS.ORIGIN_FILTER_ALL")}],openVeoSettings.authenticationMechanisms.forEach(function(e){s.push({name:l("translate")("CORE.USERS.ORIGIN_FILTER_"+e.toUpperCase()),value:e})}),s)}],o.header=[{key:"name",name:l("translate")("CORE.USERS.NAME_COLUMN"),class:["col-xs-11"]},{key:"action",name:l("translate")("CORE.UI.ACTIONS_COLUMN"),class:["col-xs-1"]}],o.actions=[{label:l("translate")("CORE.UI.REMOVE"),warningPopup:!0,condition:function(e){return a.rights.delete&&!e.locked&&!e.saving},callback:function(e,t){i([e.id],t)},global:function(e,t){i(e,t)}}];var p=a.editFormContainer={};p.model={},p.entityType=r,p.fields=[{key:"originLiteral",type:"simple",templateOptions:{label:l("translate")("CORE.USERS.ATTR_ORIGIN")}},{key:"name",type:"horizontalEditableInput",templateOptions:{label:l("translate")("CORE.USERS.ATTR_NAME"),required:!0}},{key:"email",type:"horizontalEditableInput",templateOptions:{label:l("translate")("CORE.USERS.ATTR_EMAIL"),required:!0,pattern:t}}],0!=a.roles.length&&p.fields.push({key:"roles",type:"horizontalEditableMultiCheckbox",templateOptions:{label:l("translate")("CORE.USERS.ATTR_ROLE"),required:!1,options:a.roles,valueProperty:"id",labelProperty:"name"}}),p.conditionEditDetail=function(e){return a.rights.edit&&!e.locked},p.onSubmit=function(e){return t=e,n.updateEntity(r,null,t.id,{name:t.name,email:t.email,roles:t.roles});var t},p.init=function(e){e.originLiteral=l("translate")("CORE.USERS.ORIGIN_"+e.origin.toUpperCase())};var E=a.addFormContainer={};E.model={},E.fields=[{key:"name",type:"horizontalInput",templateOptions:{label:l("translate")("CORE.USERS.FORM_ADD_NAME"),required:!0,description:l("translate")("CORE.USERS.FORM_ADD_NAME_DESC")}},{key:"email",type:"horizontalInput",templateOptions:{type:"email",label:l("translate")("CORE.USERS.FORM_ADD_EMAIL"),required:!0,description:l("translate")("CORE.USERS.FORM_ADD_EMAIL_DESC"),pattern:t},expressionProperties:{"templateOptions.disabled":"!model.name"}},{key:"password",type:"horizontalInput",templateOptions:{type:"password",label:l("translate")("CORE.USERS.FORM_ADD_PASSWORD"),required:!0,description:l("translate")("CORE.USERS.FORM_ADD_PASSWORD_DESC")},expressionProperties:{"templateOptions.disabled":"!model.email"}},{key:"passwordValidate",type:"horizontalInput",templateOptions:{type:"password",label:l("translate")("CORE.USERS.FORM_ADD_PASSWORD_VALIDATE"),required:!0,description:l("translate")("CORE.USERS.FORM_ADD_PASSWORD_VALIDATE_DESC")},expressionProperties:{"templateOptions.disabled":"!model.password"}}],0==a.roles.length?E.fields.push({noFormControl:!0,type:"emptyrow",templateOptions:{label:l("translate")("CORE.USERS.FORM_ADD_ROLE"),message:l("translate")("CORE.USERS.NO_ROLE")}}):E.fields.push({key:"roles",type:"horizontalMultiCheckbox",templateOptions:{label:l("translate")("CORE.USERS.FORM_ADD_ROLE"),required:!1,options:a.roles,valueProperty:"id",labelProperty:"name",description:l("translate")("CORE.USERS.FORM_ADD_ROLE_DESC")},expressionProperties:{"templateOptions.disabled":"!model.passwordValidate"}}),E.onSubmit=function(e){return a={name:(t=e).name,email:t.email,password:t.password,passwordValidate:t.passwordValidate,roles:t.roles||[]},n.addEntities(r,null,[a]);var t,a}}angular.module("ov").controller("UserController",t),t.$inject=["$scope","$filter","entityService","roles"]}();;"use strict";!function(e){function t(n,i,r,a){var l="groups";function o(e,t){r.removeEntities(l,null,e.join(",")).then(function(){a.cacheClear("permissions"),n.$emit("setAlert","success",i("translate")("CORE.GROUPS.REMOVE_SUCCESS"),4e3),t()})}n.rights={},n.rights.add=n.checkAccess("core-add-"+l),n.rights.edit=n.checkAccess("core-update-"+l),n.rights.delete=n.checkAccess("core-delete-"+l);var e=n.addFormContainer={};e.model={},e.fields=[{key:"name",type:"horizontalInput",templateOptions:{label:i("translate")("CORE.GROUPS.FORM_ADD_NAME"),required:!0,description:i("translate")("CORE.GROUPS.FORM_ADD_NAME_DESC")}},{key:"description",type:"horizontalInput",templateOptions:{label:i("translate")("CORE.GROUPS.FORM_ADD_DESCRIPTION"),required:!0,description:i("translate")("CORE.GROUPS.FORM_ADD_DESCRIPTION_DESC")}}],e.onSubmit=function(e){return t=e,r.addEntities(l,null,[t]).then(function(){a.cacheClear("permissions")});var t};var t=n.tableContainer={};t.entityType=l,t.filterBy=[{key:"query",label:i("translate")("CORE.GROUPS.QUERY_FILTER")}],t.header=[{key:"name",name:i("translate")("CORE.GROUPS.NAME_COLUMN"),class:["col-xs-11"]},{key:"action",name:i("translate")("CORE.UI.ACTIONS_COLUMN"),class:["col-xs-1"]}],t.actions=[{label:i("translate")("CORE.UI.REMOVE"),warningPopup:!0,condition:function(e){return n.rights.delete&&!e.locked&&!e.saving},callback:function(e,t){o([e.id],t)},global:function(e,t){o(e,t)}}];var s=n.editFormContainer={};s.model={},s.entityType=l,s.fields=[{key:"name",type:"horizontalEditableInput",templateOptions:{label:i("translate")("CORE.GROUPS.ATTR_NAME"),required:!0}},{key:"description",type:"horizontalEditableInput",templateOptions:{label:i("translate")("CORE.GROUPS.ATTR_DESCRIPTION"),required:!0}}],s.conditionEditDetail=function(e){return n.rights.edit&&!e.locked},s.onSubmit=function(e){return t=e,r.updateEntity(l,null,t.id,t).then(function(){a.cacheClear("permissions")});var t}}angular.module("ov").controller("GroupController",t),t.$inject=["$scope","$filter","entityService","userService"]}();;"use strict";!function(t){function e(t,e,i,s,n){var r="users";function a(){var t="";if(n.roles&&n.roles.length){var e=0;for(e=0;e<n.roles.length-1;e++)t+=n.roles[e].name+", ";t+=n.roles[e].name}return t}var o=this;this.password="",this.confirmPassword="",this.isInvalid=!0,this.isSaving=!1,this.user=n,this.roles=a()||e("translate")("CORE.PROFILES.NO_ROLES"),this.authenticationStrategies=openVeoSettings.authenticationStrategies;var l=t.editFormContainer={};t.row=this.user,l.entityType=r,this.user.origin===openVeoSettings.authenticationStrategies.LOCAL&&(l.fields=[{key:"name",type:"horizontalEditableInput",templateOptions:{label:e("translate")("CORE.PROFILES.ATTR_NAME"),required:!0}},{key:"email",type:"emptyrow",templateOptions:{label:e("translate")("CORE.PROFILES.ATTR_EMAIL"),message:this.user.email}}],this.user.roles&&this.user.roles.length&&l.fields.push({noFormControl:!0,type:"emptyrow",templateOptions:{label:e("translate")("CORE.PROFILES.ATTR_ROLES"),message:a()}})),l.conditionEditDetail=function(t){return t.id!==openVeoSettings.superAdminId&&!t.locked},l.onSubmit=function(t){return(e=t).saving=!0,o.user.name=e.name,s.updateEntity(r,null,e.id,{name:e.name,email:e.email}).then(function(){i.setUserInfo(n)}).finally(function(){e.saving=!1});var e},this.updatePassword=function(){this.isSaving=!0,s.updateEntity(r,null,this.user.id,{password:this.password,passwordValidate:this.confirmPassword,email:this.email}).then(function(){o.isSaving=!1,o.resetForm(),t.$emit("setAlert","success",e("translate")("CORE.UI.SAVE_SUCCESS"),4e3)},function(t,e){o.isSaving=!1})},this.resetForm=function(){this.password="",this.confirmPassword="",this.isInvalid=!0},this.checkValid=function(){return this.isInvalid=!this.password||!this.confirmPassword||this.password!==this.confirmPassword,this.isInvalid},this.passwordEditable=function(){return this.user.id!=openVeoSettings.superAdminId&&!this.user.locked&&this.user.origin===openVeoSettings.authenticationStrategies.LOCAL}}angular.module("ov").controller("ProfileController",e),e.$inject=["$scope","$filter","authenticationService","entityService","user"]}();;"use strict";!function(i,e){function n(e,n,u){var a;function t(){if(a){var e=u.path();for(var n in a)if(i.isArray(a[n].subMenu)){a[n].active=!1;for(var t=0;t<a[n].subMenu.length;t++)a[n].subMenu[t].active="/"+a[n].subMenu[t].path===e,a[n].active=a[n].active||a[n].subMenu[t].active}else a[n].active="/"+a[n].path===e}}return{loadMenu:function(){return a?n.when({data:a}):e.get("/be/getMenu").then(function(e){return a=e.data,t(),n.when(e)})},getMenu:function(){return a},destroyMenu:function(){a=null},setActiveMenuItem:t}}angular.module("ov").factory("menuService",n),n.$inject=["$http","$q","$location"]}(angular);;"use strict";!function(n){function e(n,e){var t;return{loadPermissions:function(){return t?e.when({data:t}):n.get("/be/permissions").then(function(n){return t=n.data,e.when(n)})},getPermissions:function(){return t},destroy:function(){t=null},cacheClear:function(n){if(n)switch(n){case"permissions":t=null;break;default:return}else t=null}}}angular.module("ov").factory("userService",e),e.$inject=["$http","$q"]}();;"use strict";!function(n){function t(n,t){var e;return{destroy:function(){e=null},loadScopes:function(){return e?t.when({data:e}):n.get("/be/ws/scopes").then(function(n){return e=n.data,t.when(n)})},getScopes:function(){return e}}}angular.module("ov").factory("applicationService",t),t.$inject=["$http","$q"]}();;"use strict";angular,angular.module("ov").filter("truncate",function(){return function(n){return n&&""!=n&&35<n.length&&(n=n.slice(0,35)+"..."),n}});;"use strict";angular.module("ov").directive("ovTags",function(){return{restrict:"E",templateUrl:"ov-core-tags.html",require:["?ngModel"],replace:!0,scope:{ovAvailableOptions:"=?",ovPlaceholder:"=?"},link:function(l,a,e,t){var o=t[0];function i(){l.ovAvailableOptions=l.availableOptions=void 0===l.ovAvailableOptions?null:l.ovAvailableOptions,l.ovPlaceholder=l.placeholder=void 0===l.ovPlaceholder?"":l.ovPlaceholder}function n(){if(!l.availableOptions)return angular.copy(l.tags);var t=[];return l.tags.forEach(function(a){for(var e=0;e<l.availableOptions.length;e++)if(l.availableOptions[e].name===a){t.push(l.availableOptions[e].value);break}}),t}l.editableTagsInput="",l.autoCompleteValues=[],o.$render=function(){l.availableOptions?(l.tags=[],(o.$viewValue||[]).forEach(function(a){for(var e=0;e<l.availableOptions.length;e++)if(l.availableOptions[e].value===a){l.tags.push(l.availableOptions[e].name);break}})):l.tags=angular.copy(o.$viewValue)||[]},l.addTag=function(a){if(!l.availableOptions&&a&&-1===l.tags.indexOf(a))return l.editableTagsInput="",l.tags.push(a),o.$setViewValue(n()),void o.$validate();if(l.availableOptions)for(var e=0;e<l.availableOptions.length;e++)if(l.availableOptions[e].name===a){a&&-1===l.tags.indexOf(l.availableOptions[e].name)&&(l.tags.push(a),o.$setViewValue(n()),o.$validate()),l.editableTagsInput="",l.autoComplete();break}},l.handleKeys=function(a){13===a.keyCode&&(l.addTag(l.editableTagsInput),a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},l.removeTag=function(a,e){l.tags.splice(e,1),o.$setViewValue(n()),a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),o.$validate()},l.autoComplete=function(){l.availableOptions&&(l.autoCompleteValues.splice(0,l.autoCompleteValues.length),l.editableTagsInput&&l.availableOptions.forEach(function(a){0===a.name.toLowerCase().indexOf(l.editableTagsInput.toLowerCase())&&l.autoCompleteValues.push(a)}))},o.$isEmpty=function(a){return!a||0===a.length},l.$watch("ovAvailableOptions",i),l.$watch("ovPlaceholder",i),i()}}});;"use strict";angular.module("ov").directive("ovMultiCheckBox",function(){return{restrict:"E",templateUrl:"ov-core-mutli-check-box.html",require:["?ngModel"],replace:!0,scope:{options:"=",labelProperty:"=?",valueProperty:"=?",disabled:"=?"},link:function(l,e,r,a){var t,o=a[0],u=NaN;function n(e){for(var r=0;r<l.options.length;r++)if(l.options[r][l.valueProperty]===e)return r;return-1}l.labelProperty=l.labelProperty||"name",l.valueProperty=l.valueProperty||"value",o.$render=function(){var e=angular.copy(o.$viewValue)||[];l.values=[];for(var r=0;r<e.length;r++){var a=n(e[r]);0<=a&&(l.values[a]=!0)}},l.onChange=function(){for(var e=[],r=0;r<l.values.length;r++)l.values[r]&&e.push(l.options[r][l.valueProperty]);o.$setViewValue(e)},l.$watch(function(){u!==o.$viewValue||angular.equals(t,o.$viewValue)||(t=angular.copy(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}});;"use strict";angular.module("ov").directive("ovMatch",function(){return{restrict:"E",templateUrl:"ov-core-match.html",require:["?ngModel"],replace:!0,scope:{ovMultiple:"=?",ovAvailableOptions:"=?",ovAddLabel:"=?",ovInputPlaceholder:"=?",ovTagsPlaceholder:"=?",ovInputProperty:"=?",ovTagsProperty:"=?"},link:function(o,e,l,a){var t=a[0];function v(){o.ovAddLabel=o.addLabel=void 0===o.ovAddLabel?"":o.ovAddLabel,o.ovMultiple=o.multiple=void 0===o.ovMultiple||o.ovMultiple,o.ovAvailableOptions=o.availableOptions=void 0===o.ovAvailableOptions?null:o.ovAvailableOptions,o.ovInputPlaceholder=o.inputPlaceholder=void 0===o.ovInputPlaceholder?"":o.ovInputPlaceholder,o.ovTagsPlaceholder=o.tagsPlaceholder=void 0===o.ovTagsPlaceholder?"":o.ovTagsPlaceholder,o.ovInputProperty=o.inputProperty=void 0===o.ovInputProperty?"value":o.ovInputProperty,o.ovTagsProperty=o.tagsProperty=void 0===o.ovTagsProperty?"values":o.ovTagsProperty}t.$render=function(){o.matches=angular.copy(t.$viewValue)||[]},o.addMatch=function(){o.matches.push({}),o.updateModel()},o.removeMatch=function(e){o.matches.splice(e,1),o.updateModel()},o.updateModel=function(){t.$setViewValue(angular.copy(o.matches)),t.$validate()},t.$isEmpty=function(e){return!(e&&0!==e.length&&(1!==e.length||e[0].value&&e[0].values&&e[0].values.length))},o.$watch("ovAddLabel",v),o.$watch("ovMultiple",v),o.$watch("ovAvailableOptions",v),o.$watch("ovInputPlaceholder",v),o.$watch("ovTagsPlaceholder",v),v()}}});;"use strict";!function(t){function a(e,s,t,i,a,n,l){var S=openVeoSettings.authenticationStrategies;this.isSaving=!1,this.hasLdap=0<=openVeoSettings.authenticationMechanisms.indexOf(S.LDAP),this.hasCas=0<=openVeoSettings.authenticationMechanisms.indexOf(S.CAS),this.formValues={hasLdap:this.hasLdap,hasCas:this.hasCas,ldapMatches:a.data.entity&&a.data.entity.value,casMatches:n.data.entity&&n.data.entity.value};var o,r=(o=[],l.data.entities.forEach(function(t){o.push({name:t.name,value:t.id})}),o);this.formFields=[{type:"section",templateOptions:{title:s("translate")("CORE.SETTINGS.LDAP.TITLE")},hideExpression:"!model.hasLdap"},{key:"ldapMatches",type:"horizontalMatch",templateOptions:{label:s("translate")("CORE.SETTINGS.LDAP.GROUP_ASSOC_LABEL"),description:s("translate")("CORE.SETTINGS.LDAP.GROUP_ASSOC_DESC"),addLabel:s("translate")("CORE.SETTINGS.LDAP.GROUP_ASSOC_ADD"),multiple:!0,inputPlaceholder:s("translate")("CORE.SETTINGS.LDAP.GROUP_ASSOC_INPUT"),tagsPlaceholder:s("translate")("CORE.SETTINGS.LDAP.GROUP_ASSOC_TAGS"),availableOptions:r,inputProperty:"group",tagsProperty:"roles"},hideExpression:"!model.hasLdap"},{type:"section",templateOptions:{title:s("translate")("CORE.SETTINGS.CAS.TITLE")},hideExpression:"!model.hasCas"},{key:"casMatches",type:"horizontalMatch",templateOptions:{label:s("translate")("CORE.SETTINGS.CAS.GROUP_ASSOC_LABEL"),description:s("translate")("CORE.SETTINGS.CAS.GROUP_ASSOC_DESC"),addLabel:s("translate")("CORE.SETTINGS.CAS.GROUP_ASSOC_ADD"),multiple:!0,inputPlaceholder:s("translate")("CORE.SETTINGS.CAS.GROUP_ASSOC_INPUT"),tagsPlaceholder:s("translate")("CORE.SETTINGS.CAS.GROUP_ASSOC_TAGS"),availableOptions:r,inputProperty:"group",tagsProperty:"roles"},hideExpression:"!model.hasCas"}],this.save=function(){var t=this,a=[];this.hasLdap&&this.formValues.ldapMatches&&a.push({id:"core-"+S.LDAP,value:this.formValues.ldapMatches}),this.hasCas&&this.formValues.casMatches&&a.push({id:"core-"+S.CAS,value:this.formValues.casMatches}),a.length&&(this.isSaving=!0,i.addEntities("settings",null,a).then(function(){t.isSaving=!1,e.$emit("setAlert","success",s("translate")("CORE.SETTINGS.SAVE_SUCCESS"),4e3)}))}}angular.module("ov").controller("SettingsController",a),a.$inject=["$scope","$filter","$q","entityService","ldapSettings","casSettings","roles"]}();;"use strict";angular.module("ov").directive("ovDateTimePicker",function(){return{restrict:"E",templateUrl:"ov-core-date-time-picker.html",require:["?ngModel"],replace:!0,scope:{currentText:"@?ovCurrentText",clearText:"@?ovClearText",closeText:"@?ovCloseText"},controller:"OvDateTimePickerController",controllerAs:"$ctrl"}});;"use strict";!function(e){function t(n,e,t){var u,r,o=this,l=n.controller("ngModel");Object.defineProperties(o,{calendarIsOpened:{value:!1,writable:!0},date:{value:null,writable:!0},time:{value:null,writable:!0},$postLink:{value:function(){e(function(){for(var e=n[0].querySelectorAll(".ov-time-picker input"),t=angular.element(n[0].querySelector("input[uib-datepicker-popup]")),l=angular.element(n[0].querySelector("div[uib-timepicker]")),a=0;a<e.length;a++){var i=e[a];angular.element(i).on("blur",o.setAsTouched.bind(o))}u=t.controller("ngModel"),r=l.controller("ngModel")})}},openDatePicker:{value:function(){o.calendarIsOpened=!0}},updateModelValue:{value:function(){if(u&&r&&(l.$setValidity("dateTime",u.$valid&&r.$valid),!u.$invalid&&!r.$invalid)){if(!o.date)return l.$validate();var e=angular.copy(o.date);e.setHours(o.time?o.time.getHours():0),e.setMinutes(o.time?o.time.getMinutes():0),e.setSeconds(0),l.$setViewValue(e),l.$validate()}}},setAsTouched:{value:function(){l.$setTouched()}}}),l.$render=function(){o.date=angular.copy(l.$viewValue),o.time=angular.copy(l.$viewValue)},l.$isEmpty=function(e){return!o.date},l.$validators.dateTime=function(){return!u||!r||u.$valid&&r.$valid},t.$watch("$ctrl.date",o.updateModelValue.bind(o)),t.$watch("$ctrl.time",o.updateModelValue.bind(o))}angular.module("ov").controller("OvDateTimePickerController",t),t.$inject=["$element","$timeout","$scope"]}();;"use strict";angular.module("ov").directive("ovAutoComplete",function(){return{restrict:"E",templateUrl:"ov-core-auto-complete.html",require:["?ngModel"],replace:!0,scope:{ovPlaceholder:"=?",ovGetSuggestions:"="},link:function(n,e,t,a){var l=a[0];function o(){n.ovPlaceholder=n.placeholder=void 0===n.ovPlaceholder?"":n.ovPlaceholder,n.getSuggestions=n.ovGetSuggestions}function u(){n.element.name&&n.element.value?l.$setViewValue({value:n.element.value,name:n.element.name}):l.$setViewValue(null),l.$validate()}n.element={},n.suggestions=[],l.$render=function(){n.element.name=l.$viewValue&&l.$viewValue.name,n.element.value=l.$viewValue&&l.$viewValue.value},n.validateValue=function(){if(!n.element.name)return n.updateSuggestions([]),u();n.getSuggestions(n.element.name).then(function(e){if(e.length){for(var t=0;t<e.length;t++)if(e[t].name.toLowerCase()===n.element.name.toLowerCase()){n.validateSuggestion(e[t]);break}n.updateSuggestions(e)}else n.updateSuggestions([]),n.element.value=null,u()})},n.validateSuggestion=function(e){n.element.name=e.name,n.element.value=e.value,n.updateSuggestions([]),u()},n.updateSuggestions=function(e){n.suggestions.splice(0,n.suggestions.length),e.forEach(function(e){e.name.toLowerCase()!==n.element.name.toLowerCase()&&n.suggestions.push({name:e.name,value:e.value})})},l.$isEmpty=function(e){return!e},n.$watch("ovPlaceholder",o),n.$watch("ovGetSuggestions",o),o()}}});