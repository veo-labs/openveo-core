"use strict";!function(){function t(o){var n,e="/be/";return n=openVeoSettings.user,{login:function(t,n){return o.post(e+"authenticate",{login:t,password:n})},logout:function(){return o.post(e+"logout")},getUserInfo:function(){return n},setUserInfo:function(t){n=t||null}}}angular.module("ov.authentication",[]).factory("authenticationService",t),t.$inject=["$http"]}();;"use strict";angular.module("ov.storage",[]).provider("storage",function(){var i=this;this.prefix="ov-",this.type="localStorage",this.$get=["$window",function(r){function e(e,t){r[i.type][i.prefix+e]=t}return{get:function(e){return r[i.type][i.prefix+e]},add:e,set:e,remove:function(e){r[i.type].removeItem(i.prefix+e)}}}]});;"use strict";!function(o){var n=o.module("ov.i18n",["ngCookies"]);function e(r,e){var a=e.get("language")||navigator.language||navigator.browserLanguage,i={},t=[];function u(n){for(var e=0;e<t.length;e++)if(n===t[e].value)return!0;return!1}function o(){for(var n=0;n<t.length;n++)t[n].active=t[n].value===a}function f(n){u(n)&&(a=n,e.put("language",a),o())}function c(n,e){if(n&&e){for(var t=n.split("."),r=e,a=0;a<t.length;a++)r[t[a]]&&(r=r[t[a]]);return"string"==typeof r?r:n}return n}return function(){if(t=[{value:"en",label:"CORE.LANGUAGE.ENGLISH"},{value:"fr",label:"CORE.LANGUAGE.FRENCH"}],u(a))o();else{var n=a.split("-")[0];u(n)?f(n):f(t[0].value)}}(),{addDictionary:function(e,n){if(e&&(!i[e]||void 0===i[e][a])){var t=(n=n||!1)?"/be/":"/";return t+="getDictionary/"+e+"/"+a,r.get(t).then(function(n){i[e]||(i[e]={}),i[e][a]=n.data}).catch(function(n){i[e]||(i[e]={}),i[e][a]=null})}},removeDictionary:function(n){i[n]&&delete i[n]},getDictionary:function(n,e){return e&&i[n]?i[n][e]:i[n]},getLanguage:function(){return a},getLanguages:function(){return t},setLanguage:f,translate:function(n,e){if(e&&i[e])return i[e][a]?c(n,i[e][a]):i[e].en?c(n,i[e].en):n;var t=n;for(var r in i){if((t=c(n,i[r][a]))===n&&(t=c(n,i[r].en)),t!==n)break;t=n}return t},isLanguageSupported:u,getLanguageName:function(n){for(var e=0;e<t.length;e++)if(n===t[e].value)return t[e].label;return null},destroy:function(){i={}}}}function t(a,i,u){return function(n,e,t){var r=a.translate(n,e);return t&&(o.isObject(t)||(t=i(t)(this)),r=u(r)(t)),r}}n.factory("i18nService",e),n.filter("translate",t),e.$inject=["$http","$cookies"],t.$inject=["i18nService","$parse","$interpolate"]}(angular);;"use strict";!function(l){function t(s,d){var f="/be/",v={};function a(t,e){t||e?(e=e||"core",t?v[e]&&v[e][t]&&delete v[e][t]:v[e]={}):v=[]}function c(e,n,t,i){var r=d.defer(),a={};i&&(a={timeout:i});var o=v[n=n||"core"],u=JSON.stringify(t);if(a.params=t,o&&o[e]&&o[e][u])r.resolve(l.copy(o[e][u]));else{var c=f+("core"!==n?n+"/":"")+e;s.get(c,a).then(function(t){(o=o||(v[n]={}))[e]||(o[e]={}),o[e][u]=l.copy({data:t.data}),r.resolve({data:t.data})})}return r.promise}return{addEntities:function(t,e,n){var i=e?e+"/":"";return a(t,e),s.put(f+i+t,n)},updateEntity:function(t,e,n,i){var r=e?e+"/":"";return a(t,e),s.post(f+r+t+"/"+n,i)},removeEntities:function(t,e,n){var i=e?e+"/":"";return a(t,e),s.delete(f+i+t+"/"+n)},getEntity:function(t,e,n){var i=e?e+"/":"";return s.get(f+i+t+"/"+n)},getEntities:c,getAllEntities:function(t,n,i,r){var a=0,o=[],u=d.defer();return i=i||{},function e(){i.page=a,i.limit=void 0,c(t,n,i,r).then(function(t){o=o.concat(t.data.entities),a<t.data.pagination.pages-1?(a++,e()):u.resolve({data:{entities:o}})})}(),u.promise},deleteCache:a}}l.module("ov.entity",[]).factory("entityService",t),t.$inject=["$http","$q"]}(angular);;"use strict";!function(){function t(o,i){function u(t){return e=o.alerts.indexOf(t),o.alerts.splice(e,1);var e}return o.alerts=[],{add:function(t,e,n){var r={type:t,msg:e,close:function(){return r.timeout&&i.cancel(this.timeout),u(this)}};n&&(r.timeout=i(function(){u(r)},n)),o.alerts.push(r)},closeAll:function(){o.alerts=[]}}}angular.module("ov.alert",[]).factory("alertService",t),t.$inject=["$rootScope","$timeout"]}();;"use strict";!function(){function o(t){var n=null;return{initSocket:function(o){return n=n||io.connect(t.protocol()+"://"+t.host()+":"+openVeoSettings.socketServerPort+o)}}}angular.module("ov.socket",[]).factory("SocketFactory",o),o.$inject=["$location"]}();;"use strict";!function(d){var t=d.module("ov.tableForm",["ov.i18n","ngSanitize"]);function e(e){var t={broadcast:function(t){e.$broadcast("reloadDataTable",{callback:t})}};return t}function o(){var t=this;t.today=function(){t.dt=new Date},t.today(),t.clear=function(){t.dt=null},t.toggleMax=function(){t.maxDate=t.maxDate?null:new Date},t.toggleMax(),t.open=function(){t.status.opened=!0},t.dateOptions={startingDay:1},t.status={opened:!1}}function n(i,o,n,a){var t,r=this,l=i.editFormContainer.entityType||"",c=i.editFormContainer.pluginName;this.options={formState:{showForm:!1}},i.$watch("fec.options.formState.showForm",function(){d.forEach(r.fields,function(t){t.runExpressions&&t.runExpressions()})},!0),i.$on("$destroy",function(){r.cancelForm()}),this.init=function(t){r.model=t,i.editFormContainer.init&&i.editFormContainer.init(t),r.fields=i.editFormContainer.fields},this.conditionEditDetail=i.editFormContainer.conditionEditDetail||function(){return!0},this.updateRowBeforeEdit=function(t,e){i.editFormContainer.updateRowObjectBeforeEdit&&i.editFormContainer.updateRowObjectBeforeEdit(t,e);var o=!1;for(var n in e)t[n]&&"object"!=typeof t[n]&&t[n]!=e[n]&&(o=!0,t[n]=e[n]);return o},this.onSubmit=function(){r.model.saving=!0,i.editFormContainer.onSubmit(r.model).then(function(){try{r.options.updateInitialValue()}catch(t){}r.model.saving=!1,r.options.formState.showForm=!1,a.broadcast()},function(){r.options.resetModel(),r.model.saving=!1,r.model=t})},this.editForm=function(){t=d.copy(r.model),n.getEntity(l,c,r.model.id).then(function(t){if(!t.data.entity)return n.deleteCache(l,c),i.$emit("setAlert","danger",o("translate")("CORE.UI.WARNING_ENTITY_DELETED"),8e3),void a.broadcast();var e=t.data.entity;r.updateRowBeforeEdit(r.model,e)&&(i.$emit("setAlert","warning",o("translate")("CORE.UI.WARNING_ENTITY_MODIFIED"),8e3),n.deleteCache(l,c)),i.editFormContainer.pendingEdition=!0,r.options.formState.showForm=!0})},this.cancelForm=function(){i.editFormContainer.pendingEdition=!1,r.options.formState||(r.options.formState={}),r.options.formState.showForm=!1,r.options.resetModel(),r.model=t}}function i(t,e,o){var n=this;this.model=t.addFormContainer.model,this.fields=t.addFormContainer.fields,this.isAddButtonDisabled=!1,this.onSubmit=function(){n.isAddButtonDisabled=!0,t.addFormContainer.onSubmit(n.model).then(function(){n.options.resetModel(),o.broadcast(),t.$emit("setAlert","success",e("translate")("CORE.UI.SAVE_SUCCESS"),4e3),n.isAddButtonDisabled=!1},function(){n.isAddButtonDisabled=!1})},this.options={}}function a(o,n,i,a){var r=this;this.rows=o.tableContainer.rows||{},this.entityType=o.tableContainer.entityType||"",this.filterBy=d.copy(o.tableContainer.filterBy),this.header=o.tableContainer.header||[],this.actions=o.tableContainer.actions||[],this.notSortBy=(o.tableContainer.init?o.tableContainer.init.notSortBy:[]).concat(["action"]),this.conditionToggleDetail=o.editFormContainer.conditionToggleDetail||function(){return!0},this.showSelectAll=o.tableContainer.showSelectAll||!0,this.isRowSelected=!1,this.init={count:10,page:1,sortBy:o.tableContainer.init?o.tableContainer.init.sortBy:this.header[0].key,sortOrder:o.tableContainer.init?o.tableContainer.init.sortOrder:"asc",filterBase:!1},this.customTheme={iconUp:"glyphicon glyphicon-triangle-bottom",iconDown:"glyphicon glyphicon-triangle-top",listItemsPerPage:[5,10,20,30],itemsPerPage:10,loadOnInit:!0,cellTheme:o.tableContainer.cellTheme},this.showSelectAll&&(this.customTheme.templateHeadUrl="views/elements/head.html"),this.customTheme.templateUrl="views/elements/pagination.html";var l=o.tableContainer.pluginName,c=a.defer(),s=[];this.getResource=function(t,e){var o={};return c&&(c.promise.status=!0,c.resolve()),c=a.defer(),o.limit=e.count,o.page=Math.max(e.page-1,0),o.sortBy=e.sortBy,o.sortOrder="dsc"===e.sortOrder?"desc":"asc",r.filterBy.forEach(function(t){t.value&&""!=t.value&&(o[t.key]=t.getValue?t.getValue(t.value):t.value)}),i.getEntities(r.entityType,l,o,c.promise).then(function(t){if(r.rows=t.data.entities,r.selectAll=!1,r.isRowSelected=!1,t.data.pagination.page++,s.length){for(var e=0;e<s.length;e++)s[e]();s=[]}return{rows:r.rows,header:r.header,pagination:t.data.pagination}},function(t){return{}})},this.toggleRowDetails=function(e){r.conditionToggleDetail(e)&&d.forEach(r.rows,function(t){t.opened=t.id===e.id&&!t.opened,o.editFormContainer.pendingEdition=!1})},this.reloadCallback=function(){r.selectAll=!1},o.$on("reloadDataTable",function(t,e){e.callback&&s.push(e.callback),r.reloadCallback()}),this.commonActionExist=!1,this.checkAll=function(){r.commonActionExist=!1,d.forEach(r.rows,function(t){t.selected=r.selectAll}),r.isRowSelected=r.selectAll},this.check=function(){var e=!0;r.isRowSelected=!1,r.commonActionExist=!1,d.forEach(r.rows,function(t){t.selected?r.isRowSelected=!0:e=!1}),r.selectAll=e},this.verifyCondition=function(t){for(var e=!0,o=0;o<r.rows.length&&e;o++){var n=r.rows[o];if(n.selected){var i=!t.condition||t.condition(n);e=e&&t.global&&i}}return r.commonActionExist=r.commonActionExist||e,e},this.prepareSingleAction=function(t,e){t.warningPopup?r.openModal(t.callback,e):t.callback(e,r.reloadCallback)},this.executeGlobalAction=function(t){var e=r.getSelectedId();r.openModal(t.global,e)},this.getSelectedId=function(){for(var t=[],e=0;e<r.rows.length;e++){var o=r.rows[e];o.selected&&t.push(o.id)}return t},this.openModal=function(t,e){n.open({templateUrl:"tableModal.html",controller:"ModalInstanceTableController"}).result.then(function(){t(e,r.reloadCallback)},function(){})}}function r(t,e){t.ok=function(){e.close(!0)},t.cancel=function(){e.dismiss("cancel")}}t.controller("DataTableController",a),t.controller("FormEditController",n),t.controller("FormAddController",i),t.controller("ModalInstanceTableController",r),t.controller("DatePickerController",o),t.factory("tableReloadEventService",e),a.$inject=["$scope","$uibModal","entityService","$q"],n.$inject=["$scope","$filter","entityService","tableReloadEventService"],i.$inject=["$scope","$filter","tableReloadEventService"],r.$inject=["$scope","$uibModalInstance"],o.$inject=["$scope"],e.$inject=["$rootScope"]}(angular);;"use strict";angular.module("ov.util",[]);;"use strict";!function(){function n(e){return{buildSelectOptions:function(n){var t=[{name:e("translate")("CORE.UI.NONE"),value:null}];return n.forEach(function(n){t.push({name:n.name,value:n.id})}),t}}}angular.module("ov.util").factory("utilService",n),n.$inject=["$filter"]}();;"use strict";!function(){function r(){return{setUrlParameter:function(r,t,n){var i,o,a,e={},u=[],c=r.match(/([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);if(!c)throw new TypeError(r+" is not a valid URL");for(var l in o=c[1],a=c[2],i=c[3],a&&(u=a.split("&")).forEach(function(r){var t=r.split("=");e[t[0]]=t[1]}),e[t]=n,u=[],e)u.push(l+"="+e[l]);return u.length&&(o+="?"+u.join("&")),i&&(o+="#"+i),o}}}angular.module("ov.util").factory("OvUrlFactory",r),r.$inject=[]}();