<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ov/MenuService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ov/MenuService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

(function(angular, app) {

  /**
   * Defines a menu service to manage the menu of the application.
   *
   * @example
   * MyAngularObject.$inject = ['menuService'];
   *
   * @class MenuService
   * @memberof module:ov
   * @inner
   */
  function MenuService($http, $q, $location) {
    var basePath = '/be/';
    var menu;

    /**
     * Sets menu items corresponding to the actual path to active and the other menu items to inactive.
     *
     * @memberof module:ov~MenuService
     * @instance
     */
    function setActiveMenuItem() {
      if (menu) {
        var path = $location.path();

        for (var menuItem in menu) {

          // Sub menu
          if (angular.isArray(menu[menuItem].subMenu)) {
            menu[menuItem].active = false;
            for (var i = 0; i &lt; menu[menuItem].subMenu.length; i++) {
              menu[menuItem].subMenu[i].active = '/' + menu[menuItem].subMenu[i].path === path;
              menu[menuItem].active = menu[menuItem].active || menu[menuItem].subMenu[i].active;
            }
          } else {

            // Menu item
            menu[menuItem].active = '/' + menu[menuItem].path === path;

          }
        }
      }
    }

    /**
     * Loads the menu from server.
     *
     * @memberof module:ov~MenuService
     * @instance
     * @async
     * @return {Promise} The Http promise
     */
    function loadMenu() {
      if (!menu) {

        // Get menu from server
        return $http.get(basePath + 'getMenu').then(function(response) {
          menu = response.data;
          setActiveMenuItem();
          return $q.when(response);
        });

      }

      return $q.when({
        data: menu
      });
    }

    /**
     * Gets the menu.
     *
     * @memberof module:ov~MenuService
     * @instance
     * @return {Object} The menu
     */
    function getMenu() {
      return menu;
    }

    /**
     * Destroys MenuService cached data.
     *
     * @memberof module:ov~MenuService
     * @instance
     */
    function destroyMenu() {
      menu = null;
    }

    return {
      loadMenu: loadMenu,
      getMenu: getMenu,
      destroyMenu: destroyMenu,
      setActiveMenuItem: setActiveMenuItem
    };

  }

  app.factory('menuService', MenuService);
  MenuService.$inject = ['$http', '$q', '$location'];

})(angular, angular.module('ov'));
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ov.html">ov</a></li><li><a href="module-ov_alert.html">ov/alert</a></li><li><a href="module-ov_authentication.html">ov/authentication</a></li><li><a href="module-ov_entity.html">ov/entity</a></li><li><a href="module-ov_i18n.html">ov/i18n</a></li><li><a href="module-ov_socket.html">ov/socket</a></li><li><a href="module-ov_storage.html">ov/storage</a></li><li><a href="module-ov_util.html">ov/util</a></li></ul><h3>Classes</h3><ul><li><a href="module-ov_alert-AlertService.html">ov/alert~AlertService</a></li><li><a href="module-ov_authentication-AuthenticationService.html">ov/authentication~AuthenticationService</a></li><li><a href="module-ov_entity-EntityService.html">ov/entity~EntityService</a></li><li><a href="module-ov_i18n-I18nService.html">ov/i18n~I18nService</a></li><li><a href="module-ov_i18n-TranslateFilter.html">ov/i18n~TranslateFilter</a></li><li><a href="module-ov_socket-SocketFactory.html">ov/socket~SocketFactory</a></li><li><a href="module-ov_storage-StorageProvider.html">ov/storage~StorageProvider</a></li><li><a href="module-ov_util-OvUrlFactory.html">ov/util~OvUrlFactory</a></li><li><a href="module-ov_util-UtilService.html">ov/util~UtilService</a></li><li><a href="module-ov-ApplicationService.html">ov~ApplicationService</a></li><li><a href="module-ov-ErrorInterceptor.html">ov~ErrorInterceptor</a></li><li><a href="module-ov-MenuService.html">ov~MenuService</a></li><li><a href="module-ov-ovAutoComplete.html">ov~ovAutoComplete</a></li><li><a href="module-ov-ovDateTimePicker.html">ov~ovDateTimePicker</a></li><li><a href="module-ov-ovMatch.html">ov~ovMatch</a></li><li><a href="module-ov-ovMultiCheckBox.html">ov~ovMultiCheckBox</a></li><li><a href="module-ov-ovTags.html">ov~ovTags</a></li><li><a href="module-ov-TruncateFilter.html">ov~TruncateFilter</a></li><li><a href="module-ov-userService.html">ov~userService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Mar 11 2022 07:34:42 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
